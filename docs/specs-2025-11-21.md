Below is **only what concerns the Football Quiz webapp**, **cleanly filtered**, **rewritten**, and **organized as proper product specs**.

Everything unrelated (moving, SSLBoard, QCReady, Cloudflare, training, AI consulting, business angels, Unity mobile game, gambling/KYC, etc.) has been **fully removed**.

---

# **Football Quiz Webapp — Consolidated Product Specifications (From 21 Nov Conversation)**

## 1. **High-Level Vision**

A web-first, mobile-optimized football quiz application designed for **viral sharing**, **creator-driven quizzes**, and **real-time engagement (e.g., halftime quizzes)**.

It must:

* Be extremely low friction (instant play).
* Produce fresh quizzes every time (no repetition).
* Support sharing that drives organic virality.
* Allow anyone to create quizzes and optionally earn small amounts from ad revenue.

---

# **2. Core Product Principles**

### 2.1 **Immediate Play**

* User lands → instantly plays a quiz.
* No login required.
* Account creation only needed for monetisation or saving creator identity.

### 2.2 **Every Quiz Is Unique**

* A player must **never** get the same quiz twice.
* The pool of questions must be large enough (API + editorial + randomization).

### 2.3 **Viral Sharing First**

* The most common entry point is via a **shared quiz link** or **QR code**.
* After playing → the user is encouraged to:

  * Compare with the creator,
  * Share the quiz to friends,
  * Follow the quiz creator (optional).

### 2.4 **Influencer-Friendly**

* Influencers can share a halftime or pre-match quiz instantly.
* Followers join through the shared link.
* Leaderboards and social clash drive engagement.

---

# 3. **Quiz Generation**

### 3.1 **Sources of Questions**

**Primary**: Wandrille’s Football API (events, lineup details, match context).
**Secondary**: AI enrichment using Perplexity with web search.

### 3.2 **Purpose of AI**

* Add context to matches (e.g., “11 new players”, specific events).
* Generate harder questions (for “real fans”).
* Validate names via external API to avoid hallucinations.

### 3.3 **Constraints**

* Quizzes cannot require 30 seconds of AI latency.
* V0 should rely primarily on **existing API-generated questions**.
* Editorial questions can be mixed with dynamic ones for quality.

### 3.4 **Halftime Quiz**

* Easy to generate because fewer events occur during halftime.
* Possibly the best concept for influencers.

### 3.5 **Architecture Implication**

* Store huge numbers of questions in DB (hundreds of thousands after years).
* Small SQL DB is enough.

---

# 4. **Quiz Experience (Gameplay)**

### 4.1 **Flow**

1. User lands on a quiz link or on homepage.
2. User immediately plays (no login).
3. At the end → show:

   * Score + answers
   * Comparison with quiz creator
   * Leaderboard
4. Then → share options.

### 4.2 **Question Style**

* Must avoid being too easy (common AI issue).
* Should leverage rich, contextual details about recent matches.
* Variety matters; questions must feel fresh and non-repetitive.

---

# 5. **User Sharing and Virality**

### 5.1 **Share Timing**

* Sharing is best right **after completing** a quiz (psychological momentum).

### 5.2 **Shareable Elements**

* Score card / result summary
* Link to play the same quiz
* Creator attribution
* Leaderboard visual

### 5.3 **Follow System**

* User arrives via a shared quiz → after playing:

  * Option to follow that creator for future quizzes.

---

# 6. **Creator Features**

### 6.1 **Quiz Creation**

Creators should be able to:

* Create a quiz manually or via API.
* Customize quiz sharing page (title, image, maybe theme).
* See analytics on how many people played.

### 6.2 **Monetisation**

* Everyone (not just partners) can earn small ad revenue from their quizzes.
* Requires a user account (for payout only).

### 6.3 **Leaderboard Management**

* Creator can see who scored what on their quiz.
* Public leaderboard visible after quiz.

---

# 7. **V0 (Minimal Functional Version)**

### 7.1 **Four Required Screens**

1. **Create/Generate a Quiz**

   * Using API only (no Perplexity in V0).
   * Basic customization.
2. **Play Screen**

   * Mobile-first UX.
   * 5–10 questions.
3. **Answers / Results Screen**

   * Score
   * Correct/incorrect
   * Comparison with quiz creator
4. **Leaderboard Screen**

   * Ranking of plays
   * Share button

### 7.2 **Tech Goals**

* Simple Cloudflare deployment (Cron + Workers optional).
* No heavy infrastructure.
* No login until monetisation.

### 7.3 **No Ads or Monetisation Yet**

Focus on:

* Immediate play
* Viral sharing
* A stable DB for questions + results

---

# 8. **Future Architecture Ideas**

### 8.1 **Cloudflare Durable Objects**

* For real-time experiences (e.g., halftime quiz live room).

### 8.2 **Cron Jobs**

* Auto-detect interesting upcoming matches.
* Pre-generate quizzes ahead of time.

### 8.3 **MCP / AI Tooling**

* Not as the core of user interaction.
* Only used internally to *generate* questions efficiently.
* Current quiz API endpoints (leagues/teams/fixtures/quiz params) are outlined in `docs/qz-api-docs.md` for reference.

---

# 9. **First Time User Experience (FTUE)**

1. User plays instantly.
2. After the game → “What’s your favorite team?”
3. Only when necessary → suggest creating an account:

   * To earn revenue
   * To publish quizzes
   * To save creator profile

The goal: **minimum friction**.

---

# 10. **Misc Functional Notes**

### 10.1 **Avoid Repetition**

* No user may re-play the same quiz.
* Each play = new instance.

### 10.2 **Quiz Pools**

* Mix of:

  * Editorial questions (curated)
  * API questions (latest events)
  * AI-produced contextual questions (with quality constraints)
* Random selection for each quiz.

### 10.3 **Match Data**

* App must know which matches have special characteristics.
* API can expose timeline-like event structures.

---

# 11. **Roadmap (from discussion)**

### **Short-term (now → next week)**

* Wandrille: prepare V0 mockups / wireframes (e.g., with Lovable).
* Start implementing the basic 4-screen webapp.
* Create minimal APIs for question fetch + quiz creation.

### **Mid-term**

* Implement viral sharing flow.
* Add editor + dynamic quiz generation pipeline.
* Experiment with halftime quizzes.

### **Later**

* Add monetisation inside creator dashboards.
* Introduce AI contextualization, but optimized for speed.
* Add influencer-focused features and real-time quizzes.

---

# 12. **Quiz generation API (V0)**

* **Endpoint**: `POST /api/quiz/generate` (served by the Worker). Creates or refreshes an anonymous session using the same cookie/token helpers as the session routes and returns a quiz bound to that session. Requests with revoked sessions return `401` instructing clients to bootstrap again.
* **Response contract**: `{ quizId, sessionId, source: "mock" | "live", metadata?: { fixture }, questions: [{ id, prompt, options: [{ id, text, isCorrect }] }] }`.
* **Question counts**: endpoint clamps to 5–10 questions per request; every call mints a new `quizId` so the same session never replays the same quiz instance.
* **Mode toggle**:
  * `QUIZ_MODE=mock` (default) → serve questions from `mockup/quizz.json` for local/dev. No external calls are made.
  * `QUIZ_MODE=live` → fetch via the external quiz API. Requires `QUIZ_LEAGUE_ID` and optionally `QUIZ_API_BASE`, `QUIZ_API_AUTH`, `QUIZ_LENGTH` (5–10). Failing upstream responses return `502` with a generic error and are logged without PII.
* **Session expectations**: callers may omit cookies; the endpoint will bootstrap and set `cq_session`/`cq_access` cookies on success. When the provided session is revoked or missing in storage, the endpoint responds with a 4xx instead of issuing a quiz.
